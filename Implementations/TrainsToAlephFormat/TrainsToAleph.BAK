% Author: Matthias Delfs
% Date: 14-Jul-17

% Author:
% Date: 11-Jul-17

%eastbound([c(1,ellipse,long,none,l(rectangle,2)),c(2,rectangle,long,flat,l(circle,3)),c(3,rectangle,long,none,l(triangle,2)),c(4,hexagon,short,flat,l(triangle,1))])


aleph(T,Z) :- arg(1,T,L), examine(L,1,Z).

examine(([]),_,_).
examine(([C|Cs]),N,Z):-
                   open('trains_aleph.txt',append,Stream),
                     write(Stream, "has_car(east"), write(Stream,Z), write(Stream,",car_"), write(Stream,Z), write(Stream,N), write(Stream,")."),nl(Stream),

                    (rectangle(C) -> write(Stream, "shape(car_"), write(Stream,Z), write(Stream,N), write(Stream,",rectangle)."); write(Stream,"")),

                   nl(Stream),
                   close(Stream),
                   N is N + 1,
                   write(N).
                   %examine((Cs),N,Z)




has_car(T,C) :- member(C,T).

infront(T,C1,C2) :-
                 has_car(T,C1),
                 has_car(T,C2),
                 arg(1,C1,F),
                 arg(1,C2,G),
                 F + 1 =:= G.

ellipse(C) :- arg(2,C,ellipse).
hexagon(C) :- arg(2,C,hexagon).
rectangle(C) :- arg(2,C,rectangle).
u_shaped(C) :- arg(2,C,u_shaped).
bucket(C) :- arg(2,C,bucket).

long(C) :- arg(3,C,long).
short(C) :- arg(3,C,short).

no_roof(C) :- arg(4,C,none).
flat_roof(C) :- arg(4,C,flat).
peaked_roof(C) :- arg(4,C,peaked).
arc_roof(C) :- arg(4,C,arc).

circle_load(C) :- has_load0(C,circle).
rectangle_load(C) :- has_load0(C,rectangle).
triangle_load(C) :- has_load0(C,triangle).

one_load(C) :- has_load(C,1).
two_load(C) :- has_load(C,2).
three_load(C) :- has_load(C,3).

has_load0(C,B) :- arg(5,C,D), arg(1,D,B).
has_load(C,B) :- arg(5,C,D), arg(2,D,B).

